{"mappings":"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","sources":["node_modules/process/browser.js","node_modules/reflect-metadata/Reflect.js","node_modules/immer/src/utils/errors.ts","node_modules/immer/src/utils/common.ts","node_modules/immer/src/utils/plugins.ts","node_modules/immer/src/core/scope.ts","node_modules/immer/src/core/finalize.ts","node_modules/immer/src/core/proxy.ts","node_modules/immer/src/core/immerClass.ts","node_modules/immer/src/core/current.ts","node_modules/immer/src/plugins/es5.ts","node_modules/immer/src/immer.ts","node_modules/immer/src/utils/env.ts","src/polyfills.ts"],"sourcesContent":["// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t},\n\t24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.map(s => `'${s}'`).join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtype,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nconst objectCtorString = Object.prototype.constructor.toString()\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\tif (proto === null) {\n\t\treturn true\n\t}\n\tconst Ctor =\n\t\tObject.hasOwnProperty.call(proto, \"constructor\") && proto.constructor\n\n\tif (Ctor === Object) return true\n\n\treturn (\n\t\ttypeof Ctor == \"function\" &&\n\t\tFunction.toString.call(Ctor) === objectCtorString\n\t)\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors ||\n\tfunction getOwnPropertyDescriptors(target: any) {\n\t\t// Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n\t\tconst res: any = {}\n\t\townKeys(target).forEach(key => {\n\t\t\tres[key] = Object.getOwnPropertyDescriptor(target, key)\n\t\t})\n\t\treturn res\n\t}\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === Archtype.Object) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): Archtype {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? Archtype.Array\n\t\t: isMap(thing)\n\t\t? Archtype.Map\n\t\t: isSet(thing)\n\t\t? Archtype.Set\n\t\t: Archtype.Object\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === Archtype.Map\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === Archtype.Map) thing.set(propOrOldValue, value)\n\telse if (t === Archtype.Set) {\n\t\tthing.delete(propOrOldValue)\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return Array.prototype.slice.call(base)\n\tconst descriptors = getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tlet keys = ownKeys(descriptors)\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key: any = keys[i]\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\n/**\n * Freezes draftable objects. Returns the original object.\n * By default freezes shallowly, but if the second argument is `true` it will freeze recursively.\n *\n * @param obj\n * @param deep\n */\nexport function freeze<T>(obj: T, deep?: boolean): T\nexport function freeze<T>(obj: any, deep: boolean = false): T {\n\tif (isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return obj\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n\treturn obj\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyType,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\trootState: ImmerState,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(18, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tif (!plugins[pluginKey]) plugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: ProxyType.ES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: ProxyType.ES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: ProxyType.Map\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: ProxyType.Set\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyType,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyType.ProxyObject ||\n\t\tstate.type_ === ProxyType.ProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyType,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE],\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumerable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyType.ES5Object || state.type_ === ProxyType.ES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// Finalize all children of the copy\n\t\t// For sets we clone before iterating, otherwise we can get in endless loop due to modifying during iteration, see #628\n\t\t// Although the original test case doesn't seem valid anyway, so if this in the way we can turn the next line\n\t\t// back to each(result, ....)\n\t\teach(\n\t\t\tstate.type_ === ProxyType.Set ? new Set(result) : result,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyType.Set && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\tif (scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyType\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyType.ProxyArray : (ProxyType.ProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(\n\t\tstate: ProxyObjectState,\n\t\tprop: string /* strictly not, but helps TS */,\n\t\tvalue\n\t) {\n\t\tconst desc = getDescriptorFromProto(latest(state), prop)\n\t\tif (desc?.set) {\n\t\t\t// special case: if this write is captured by a setter, we have\n\t\t\t// to trigger it with the correct context\n\t\t\tdesc.set.call(state.draft_, value)\n\t\t\treturn true\n\t\t}\n\t\tif (!state.modified_) {\n\t\t\t// the last check is because we need to be able to distinguish setting a non-existing to undefined (which is a change)\n\t\t\t// from setting an existing property with value undefined to undefined (which is not a change)\n\t\t\tconst current = peek(latest(state), prop)\n\t\t\t// special case, if we assigning the original value to a draft, we can ignore the assignment\n\t\t\tconst currentState: ProxyObjectState = current?.[DRAFT_STATE]\n\t\t\tif (currentState && currentState.base_ === value) {\n\t\t\t\tstate.copy_![prop] = value\n\t\t\t\tstate.assigned_[prop] = false\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tif (is(value, current) && (value !== undefined || has(state.base_, prop)))\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\n\t\tif (\n\t\t\tstate.copy_![prop] === value &&\n\t\t\t// special case: NaN\n\t\t\ttypeof value !== \"number\" &&\n\t\t\t// special case: handle new props with value 'undefined'\n\t\t\t(value !== undefined || prop in state.copy_)\n\t\t)\n\t\t\treturn true\n\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\tstate.assigned_[prop] = true\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyType.ProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\tconst desc = getDescriptorFromProto(source, prop)\n\treturn desc\n\t\t? `value` in desc\n\t\t\t? desc.value\n\t\t\t: // This is a very special case, if the prop is a getter defined by the\n\t\t\t  // prototype, we should invoke it with the draft as context!\n\t\t\t  desc.get?.call(state.draft_)\n\t\t: undefined\n}\n\nfunction getDescriptorFromProto(\n\tsource: any,\n\tprop: PropertyKey\n): PropertyDescriptor | undefined {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\tif (desc) return desc\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = true\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce: IProduce = (base: any, recipe?: any, patchListener?: any) => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches: IProduceWithPatches = (\n\t\targ1: any,\n\t\targ2?: any,\n\t\targ3?: any\n\t): any => {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is enabled.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches<T extends Objectish>(base: T, patches: Patch[]): T {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// If there was a patch that replaced the entire state, start from the\n\t\t// patch after that.\n\t\tif (i > -1) {\n\t\t\tpatches = patches.slice(i + 1)\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches)\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtype,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === Archtype.Set ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase Archtype.Map:\n\t\t\treturn new Map(value)\n\t\tcase Archtype.Set:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tImmerState,\n\tDrafted,\n\tES5ArrayState,\n\tES5ObjectState,\n\teach,\n\thas,\n\tisDraft,\n\tlatest,\n\tDRAFT_STATE,\n\tis,\n\tloadPlugin,\n\tImmerScope,\n\tProxyType,\n\tgetCurrentScope,\n\tdie,\n\tmarkChanged,\n\tobjectTraps,\n\townKeys,\n\tgetOwnPropertyDescriptors\n} from \"../internal\"\n\ntype ES5State = ES5ArrayState | ES5ObjectState\n\nexport function enableES5() {\n\tfunction willFinalizeES5_(\n\t\tscope: ImmerScope,\n\t\tresult: any,\n\t\tisReplaced: boolean\n\t) {\n\t\tif (!isReplaced) {\n\t\t\tif (scope.patches_) {\n\t\t\t\tmarkChangesRecursively(scope.drafts_![0])\n\t\t\t}\n\t\t\t// This is faster when we don't care about which attributes changed.\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t\t// When a child draft is returned, look for changes.\n\t\telse if (\n\t\t\tisDraft(result) &&\n\t\t\t(result[DRAFT_STATE] as ES5State).scope_ === scope\n\t\t) {\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t}\n\n\tfunction createES5Draft(isArray: boolean, base: any) {\n\t\tif (isArray) {\n\t\t\tconst draft = new Array(base.length)\n\t\t\tfor (let i = 0; i < base.length; i++)\n\t\t\t\tObject.defineProperty(draft, \"\" + i, proxyProperty(i, true))\n\t\t\treturn draft\n\t\t} else {\n\t\t\tconst descriptors = getOwnPropertyDescriptors(base)\n\t\t\tdelete descriptors[DRAFT_STATE as any]\n\t\t\tconst keys = ownKeys(descriptors)\n\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\tconst key: any = keys[i]\n\t\t\t\tdescriptors[key] = proxyProperty(\n\t\t\t\t\tkey,\n\t\t\t\t\tisArray || !!descriptors[key].enumerable\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n\t\t}\n\t}\n\n\tfunction createES5Proxy_<T>(\n\t\tbase: T,\n\t\tparent?: ImmerState\n\t): Drafted<T, ES5ObjectState | ES5ArrayState> {\n\t\tconst isArray = Array.isArray(base)\n\t\tconst draft = createES5Draft(isArray, base)\n\n\t\tconst state: ES5ObjectState | ES5ArrayState = {\n\t\t\ttype_: isArray ? ProxyType.ES5Array : (ProxyType.ES5Object as any),\n\t\t\tscope_: parent ? parent.scope_ : getCurrentScope(),\n\t\t\tmodified_: false,\n\t\t\tfinalized_: false,\n\t\t\tassigned_: {},\n\t\t\tparent_: parent,\n\t\t\t// base is the object we are drafting\n\t\t\tbase_: base,\n\t\t\t// draft is the draft object itself, that traps all reads and reads from either the base (if unmodified) or copy (if modified)\n\t\t\tdraft_: draft,\n\t\t\tcopy_: null,\n\t\t\trevoked_: false,\n\t\t\tisManual_: false\n\t\t}\n\n\t\tObject.defineProperty(draft, DRAFT_STATE, {\n\t\t\tvalue: state,\n\t\t\t// enumerable: false <- the default\n\t\t\twritable: true\n\t\t})\n\t\treturn draft\n\t}\n\n\t// property descriptors are recycled to make sure we don't create a get and set closure per property,\n\t// but share them all instead\n\tconst descriptors: {[prop: string]: PropertyDescriptor} = {}\n\n\tfunction proxyProperty(\n\t\tprop: string | number,\n\t\tenumerable: boolean\n\t): PropertyDescriptor {\n\t\tlet desc = descriptors[prop]\n\t\tif (desc) {\n\t\t\tdesc.enumerable = enumerable\n\t\t} else {\n\t\t\tdescriptors[prop] = desc = {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable,\n\t\t\t\tget(this: any) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\treturn objectTraps.get(state, prop)\n\t\t\t\t},\n\t\t\t\tset(this: any, value) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tobjectTraps.set(state, prop, value)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn desc\n\t}\n\n\t// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\n\tfunction markChangesSweep(drafts: Drafted<any, ImmerState>[]) {\n\t\t// The natural order of drafts in the `scope` array is based on when they\n\t\t// were accessed. By processing drafts in reverse natural order, we have a\n\t\t// better chance of processing leaf nodes first. When a leaf node is known to\n\t\t// have changed, we can avoid any traversal of its ancestor nodes.\n\t\tfor (let i = drafts.length - 1; i >= 0; i--) {\n\t\t\tconst state: ES5State = drafts[i][DRAFT_STATE]\n\t\t\tif (!state.modified_) {\n\t\t\t\tswitch (state.type_) {\n\t\t\t\t\tcase ProxyType.ES5Array:\n\t\t\t\t\t\tif (hasArrayChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase ProxyType.ES5Object:\n\t\t\t\t\t\tif (hasObjectChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction markChangesRecursively(object: any) {\n\t\tif (!object || typeof object !== \"object\") return\n\t\tconst state: ES5State | undefined = object[DRAFT_STATE]\n\t\tif (!state) return\n\t\tconst {base_, draft_, assigned_, type_} = state\n\t\tif (type_ === ProxyType.ES5Object) {\n\t\t\t// Look for added keys.\n\t\t\t// probably there is a faster way to detect changes, as sweep + recurse seems to do some\n\t\t\t// unnecessary work.\n\t\t\t// also: probably we can store the information we detect here, to speed up tree finalization!\n\t\t\teach(draft_, key => {\n\t\t\t\tif ((key as any) === DRAFT_STATE) return\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif ((base_ as any)[key] === undefined && !has(base_, key)) {\n\t\t\t\t\tassigned_[key] = true\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t} else if (!assigned_[key]) {\n\t\t\t\t\t// Only untouched properties trigger recursion.\n\t\t\t\t\tmarkChangesRecursively(draft_[key])\n\t\t\t\t}\n\t\t\t})\n\t\t\t// Look for removed keys.\n\t\t\teach(base_, key => {\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif (draft_[key] === undefined && !has(draft_, key)) {\n\t\t\t\t\tassigned_[key] = false\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t}\n\t\t\t})\n\t\t} else if (type_ === ProxyType.ES5Array) {\n\t\t\tif (hasArrayChanges(state as ES5ArrayState)) {\n\t\t\t\tmarkChanged(state)\n\t\t\t\tassigned_.length = true\n\t\t\t}\n\n\t\t\tif (draft_.length < base_.length) {\n\t\t\t\tfor (let i = draft_.length; i < base_.length; i++) assigned_[i] = false\n\t\t\t} else {\n\t\t\t\tfor (let i = base_.length; i < draft_.length; i++) assigned_[i] = true\n\t\t\t}\n\n\t\t\t// Minimum count is enough, the other parts has been processed.\n\t\t\tconst min = Math.min(draft_.length, base_.length)\n\n\t\t\tfor (let i = 0; i < min; i++) {\n\t\t\t\t// Only untouched indices trigger recursion.\n\t\t\t\tif (assigned_[i] === undefined) markChangesRecursively(draft_[i])\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasObjectChanges(state: ES5ObjectState) {\n\t\tconst {base_, draft_} = state\n\n\t\t// Search for added keys and changed keys. Start at the back, because\n\t\t// non-numeric keys are ordered by time of definition on the object.\n\t\tconst keys = ownKeys(draft_)\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst key: any = keys[i]\n\t\t\tif (key === DRAFT_STATE) continue\n\t\t\tconst baseValue = base_[key]\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (baseValue === undefined && !has(base_, key)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t// Once a base key is deleted, future changes go undetected, because its\n\t\t\t// descriptor is erased. This branch detects any missed changes.\n\t\t\telse {\n\t\t\t\tconst value = draft_[key]\n\t\t\t\tconst state: ImmerState = value && value[DRAFT_STATE]\n\t\t\t\tif (state ? state.base_ !== baseValue : !is(value, baseValue)) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// At this point, no keys were added or changed.\n\t\t// Compare key count to determine if keys were deleted.\n\t\tconst baseIsDraft = !!base_[DRAFT_STATE as any]\n\t\treturn keys.length !== ownKeys(base_).length + (baseIsDraft ? 0 : 1) // + 1 to correct for DRAFT_STATE\n\t}\n\n\tfunction hasArrayChanges(state: ES5ArrayState) {\n\t\tconst {draft_} = state\n\t\tif (draft_.length !== state.base_.length) return true\n\t\t// See #116\n\t\t// If we first shorten the length, our array interceptors will be removed.\n\t\t// If after that new items are added, result in the same original length,\n\t\t// those last items will have no intercepting property.\n\t\t// So if there is no own descriptor on the last position, we know that items were removed and added\n\t\t// N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n\t\t// the last one\n\t\tconst descriptor = Object.getOwnPropertyDescriptor(\n\t\t\tdraft_,\n\t\t\tdraft_.length - 1\n\t\t)\n\t\t// descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\t\tif (descriptor && !descriptor.get) return true\n\t\t// For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\t\treturn false\n\t}\n\n\tfunction hasChanges_(state: ES5State) {\n\t\treturn state.type_ === ProxyType.ES5Object\n\t\t\t? hasObjectChanges(state)\n\t\t\t: hasArrayChanges(state)\n\t}\n\n\tfunction assertUnrevoked(state: any /*ES5State | MapState | SetState*/) {\n\t\tif (state.revoked_) die(3, JSON.stringify(latest(state)))\n\t}\n\n\tloadPlugin(\"ES5\", {\n\t\tcreateES5Proxy_,\n\t\twillFinalizeES5_,\n\t\thasChanges_\n\t})\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable,\n\tfreeze\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * Always freeze by default, even in production mode\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol.for(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","import \"reflect-metadata\";\nimport { enableES5 } from \"immer\";\n\nenableES5();\n"],"names":["$5d3084ab03506b0c$var$cachedSetTimeout","$5d3084ab03506b0c$var$cachedClearTimeout","$5d3084ab03506b0c$var$process","$5d3084ab03506b0c$exports","$5d3084ab03506b0c$var$defaultSetTimout","Error","$5d3084ab03506b0c$var$defaultClearTimeout","$5d3084ab03506b0c$var$runTimeout","fun","setTimeout","e","call","this","clearTimeout","e1","$5d3084ab03506b0c$var$currentQueue","$7599b58279856ac8$var$Reflect","$5d3084ab03506b0c$var$queue","$5d3084ab03506b0c$var$draining","$5d3084ab03506b0c$var$queueIndex","$5d3084ab03506b0c$var$cleanUpNextTick","length","concat","$5d3084ab03506b0c$var$drainQueue","timeout","len","run","marker","$5d3084ab03506b0c$var$runClearTimeout","$5d3084ab03506b0c$var$Item","array","$5d3084ab03506b0c$var$noop","nextTick","args","Array","arguments","i","push","prototype","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","Reflect","factory","root","$parcel$global","self","Function","exporter","makeExporter","target","previous","key","value","Object","defineProperty","configurable","writable","hasOwn1","hasOwnProperty","supportsSymbol","Symbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","create","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","has","map","get","undefined","functionPrototype","getPrototypeOf","usePolyfill","_Map","Map","entries","CreateMapPolyfill","_Set","Set","CreateSetPolyfill","Metadata","WeakMap","CreateWeakMapPolyfill","decorate","decorators","propertyKey","attributes","IsUndefined","IsArray","TypeError","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","delete","size","targetMetadata","decorated","descriptor","O","P","Create","set","MetadataKey","parent","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","keys","_i","ownKeys_1","add","_a","parentKeys_1","GetIterator","k","next","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","x","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","result","OrdinaryToPrimitive","toString_1","toString","IsCallable","valueOf","toString_2","argument","ToString","isArray","V","func","obj","method","iterResult","done","f","proto","prototypeProto","constructor","cacheSentinel","arraySentinel","MapIterator1","MapIterator","values","selector","_index","_keys","_values","_selector","index","throw","error","return","getKey","_","getValue","getEntry","_cacheKey","_cacheIndex","enumerable","_find","clear","insert","indexOf","_map","UUID_SIZE","rootKey","CreateUniqueKey","CreateUUID","GetOrCreateWeakMapTable","FillRandomBytes","buffer","Math","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","data","offset","byte","toLowerCase","_key","table","__","die","msg","s","join","isDraft","DRAFT_STATE","isDraftable","Ctor","objectCtorString","DRAFTABLE","isMap","isSet","each","iter","enumerableOnly","getArchtype","forEach","entry","thing","state","type_","prop","propOrOldValue","t","is","y","hasMap","hasSet","latest","copy_","base_","shallowCopy","base","slice","descriptors","getOwnPropertyDescriptors","desc","freeze","deep","isFrozen","dontMutateFrozenCollections","getPlugin","pluginKey","plugin","plugins","loadPlugin","implementation","getCurrentScope","currentScope","usePatchesInScope","scope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer","immer_","canAutoFreeze_","unfinalizedDrafts_","draft","revoke_","revoked_","processResult","baseDraft","isReplaced","useProxies_","willFinalizeES5_","modified_","finalize","maybeFreeze","generateReplacementPatches_","NOTHING","rootScope","path","childValue","finalizeProperty","scope_","finalized_","draft_","generatePatches_","parentState","targetObject","rootPath","res","assigned_","autoFreeze_","peek","getDescriptorFromProto","source","getOwnPropertyDescriptor","markChanged","prepareCopy","createProxy","proxyMap_","proxySet_","isManual_","traps","objectTraps","arrayTraps","Proxy","revocable","revoke","proxy","createES5Proxy_","copyHelper","archType","from","enableES5","proxyProperty","markChangesSweep","drafts","hasArrayChanges","hasObjectChanges","baseValue","baseIsDraft","markChangesRecursively","object","min","hasChanges_","hasSymbol","hasProxies","for","$0ba5d9c7ba34815d$var$G","getOwnPropertySymbols","getOwnPropertyNames","_desc$get","current","currentState","deleteProperty","owner","setPrototypeOf","fn","Immer","e9","config","produce","recipe","defaultBase","_this","_this2","hasError","Promise","then","arg1","arg2","patches","inversePatches","produceWithPatches","p","ip","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","currentImpl","copy","finishDraft","applyPatches","patch","op","applyPatchesImpl","applyPatches_","bind"],"version":3,"file":"index.8af5ead4.js.map"}